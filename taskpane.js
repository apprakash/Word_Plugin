/*! For license information please see taskpane.js.LICENSE.txt */
!function(){"use strict";var t={58394:function(t,e,r){t.exports=r.p+"000aec2dc656998972dd.css"}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.m=t,r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t}(),r.b=document.baseURI||self.location.href,function(){const t="0.39.0";let e,r,n,o,i,s,a=!1,c=null,u=null,l=null,h=null,f=null,d=null,p=null;class m{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}e||function(t,m={auto:!1}){if(a)throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${t.kind}'\` before importing anything else from @anthropic-ai/sdk`);if(e)throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${t.kind}'\` after \`import '@anthropic-ai/sdk/shims/${e}'\``);a=m.auto,e=t.kind,r=t.fetch,c=t.Request,u=t.Response,l=t.Headers,h=t.FormData,f=t.Blob,n=t.File,o=t.ReadableStream,d=t.getMultipartRequestOptions,i=t.getDefaultAgent,s=t.fileFromPath,p=t.isFsReadStream}(function({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import â€¦ from '@anthropic-ai/sdk'`:\n- `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)\n- `import '@anthropic-ai/sdk/shims/web'` (otherwise)\n";let r,n,o,i;try{r=fetch,n=Request,o=Response,i=Headers}catch(t){throw new Error(`this environment is missing the following Web Fetch API type: ${t.message}. ${e}`)}return{kind:"web",fetch:r,Request:n,Response:o,Headers:i,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(t,e)=>({...e,body:new m(t)}),getDefaultAgent:t=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads")},isFsReadStream:t=>!1}}(),{auto:!0});class y extends Error{}class g extends y{constructor(t,e,r,n){super(`${g.makeMessage(t,e,r)}`),this.status=t,this.headers=n,this.request_id=n?.["request-id"],this.error=e}static makeMessage(t,e,r){const n=e?.message?"string"==typeof e.message?e.message:JSON.stringify(e.message):e?JSON.stringify(e):r;return t&&n?`${t} ${n}`:t?`${t} status code (no body)`:n||"(no status code or body)"}static generate(t,e,r,n){if(!t||!n)return new w({message:r,cause:at(e)});const o=e;return 400===t?new x(t,o,r,n):401===t?new _(t,o,r,n):403===t?new k(t,o,r,n):404===t?new E(t,o,r,n):409===t?new S(t,o,r,n):422===t?new L(t,o,r,n):429===t?new P(t,o,r,n):t>=500?new A(t,o,r,n):new g(t,o,r,n)}}class v extends g{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class w extends g{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class b extends w{constructor({message:t}={}){super({message:t??"Request timed out."})}}class x extends g{}class _ extends g{}class k extends g{}class E extends g{}class S extends g{}class L extends g{}class P extends g{}class A extends g{}var R,j=function(t,e,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(t,r):o?o.value=r:e.set(t,r),r},O=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class T{constructor(){R.set(this,void 0),this.buffer=new Uint8Array,j(this,R,null,"f")}decode(t){if(null==t)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):"string"==typeof t?(new TextEncoder).encode(t):t;let r=new Uint8Array(this.buffer.length+e.length);r.set(this.buffer),r.set(e,this.buffer.length),this.buffer=r;const n=[];let o;for(;null!=(o=I(this.buffer,O(this,R,"f")));){if(o.carriage&&null==O(this,R,"f")){j(this,R,o.index,"f");continue}if(null!=O(this,R,"f")&&(o.index!==O(this,R,"f")+1||o.carriage)){n.push(this.decodeText(this.buffer.slice(0,O(this,R,"f")-1))),this.buffer=this.buffer.slice(O(this,R,"f")),j(this,R,null,"f");continue}const t=null!==O(this,R,"f")?o.preceding-1:o.preceding,e=this.decodeText(this.buffer.slice(0,t));n.push(e),this.buffer=this.buffer.slice(o.index),j(this,R,null,"f")}return n}decodeText(t){if(null==t)return"";if("string"==typeof t)return t;if("undefined"!=typeof Buffer){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new y(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new y(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new y("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode("\n"):[]}}function I(t,e){for(let r=e??0;r<t.length;r++){if(10===t[r])return{preceding:r,index:r+1,carriage:!1};if(13===t[r])return{preceding:r,index:r+1,carriage:!0}}return null}function M(t){for(let e=0;e<t.length-1;e++){if(10===t[e]&&10===t[e+1])return e+2;if(13===t[e]&&13===t[e+1])return e+2;if(13===t[e]&&10===t[e+1]&&e+3<t.length&&13===t[e+2]&&10===t[e+3])return e+4}return-1}function N(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}R=new WeakMap,T.NEWLINE_CHARS=new Set(["\n","\r"]),T.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class q{constructor(t,e){this.iterator=t,this.controller=e}static fromSSEResponse(t,e){let r=!1;return new q((async function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const r of async function*(t,e){if(!t.body)throw e.abort(),new y("Attempted to iterate over a response with no body");const r=new C,n=new T,o=N(t.body);for await(const t of async function*(t){let e=new Uint8Array;for await(const r of t){if(null==r)continue;const t=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?(new TextEncoder).encode(r):r;let n,o=new Uint8Array(e.length+t.length);for(o.set(e),o.set(t,e.length),e=o;-1!==(n=M(e));)yield e.slice(0,n),e=e.slice(n)}e.length>0&&(yield e)}(o))for(const e of n.decode(t)){const t=r.decode(e);t&&(yield t)}for(const t of n.flush()){const e=r.decode(t);e&&(yield e)}}(t,e)){if("completion"===r.event)try{yield JSON.parse(r.data)}catch(t){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),t}if("message_start"===r.event||"message_delta"===r.event||"message_stop"===r.event||"content_block_start"===r.event||"content_block_delta"===r.event||"content_block_stop"===r.event)try{yield JSON.parse(r.data)}catch(t){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),t}if("ping"!==r.event&&"error"===r.event)throw g.generate(void 0,`SSE Error: ${r.data}`,r.data,V(t.headers))}n=!0}catch(t){if(t instanceof Error&&"AbortError"===t.name)return;throw t}finally{n||e.abort()}}),e)}static fromReadableStream(t,e){let r=!1;return new q((async function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const e of async function*(){const e=new T,r=N(t);for await(const t of r)for(const r of e.decode(t))yield r;for(const t of e.flush())yield t}())n||e&&(yield JSON.parse(e));n=!0}catch(t){if(t instanceof Error&&"AbortError"===t.name)return;throw t}finally{n||e.abort()}}),e)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],r=this.iterator(),n=n=>({next:()=>{if(0===n.length){const n=r.next();t.push(n),e.push(n)}return n.shift()}});return[new q((()=>n(t)),this.controller),new q((()=>n(e)),this.controller)]}toReadableStream(){const t=this;let e;const r=new TextEncoder;return new o({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{const{value:n,done:o}=await e.next();if(o)return t.close();const i=r.encode(JSON.stringify(n)+"\n");t.enqueue(i)}catch(e){t.error(e)}},async cancel(){await(e.return?.())}})}}class C{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const t={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],t}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,r,n]=function(t){const e=t.indexOf(":");return-1!==e?[t.substring(0,e),":",t.substring(e+1)]:[t,"",""]}(t);return n.startsWith(" ")&&(n=n.substring(1)),"event"===e?this.event=n:"data"===e&&this.data.push(n),null}}const W=t=>null!=t&&"object"==typeof t&&"number"==typeof t.size&&"string"==typeof t.type&&"function"==typeof t.text&&"function"==typeof t.slice&&"function"==typeof t.arrayBuffer;const B=t=>"string"==typeof t?t:"undefined"!=typeof Buffer&&t instanceof Buffer?String(t):void 0,$=t=>null!=t&&"object"==typeof t&&"function"==typeof t[Symbol.asyncIterator],U=t=>t&&"object"==typeof t&&t.body&&"MultipartBody"===t[Symbol.toStringTag];var F;async function D(t){const{response:e}=t;if(t.options.stream)return ft("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):q.fromSSEResponse(e,t.controller);if(204===e.status)return null;if(t.options.__binaryResponse)return e;const r=e.headers.get("content-type");if(r?.includes("application/json")||r?.includes("application/vnd.api+json")){const t=await e.json();return ft("response",e.status,e.url,e.headers,t),H(t,e)}const n=await e.text();return ft("response",e.status,e.url,e.headers,n),n}function H(t,e){return!t||"object"!=typeof t||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}class G extends Promise{constructor(t,e=D){super((t=>{t(null)})),this.responsePromise=t,this.parseResponse=e}_thenUnwrap(t){return new G(this.responsePromise,(async e=>H(t(await this.parseResponse(e),e),e.response)))}asResponse(){return this.responsePromise.then((t=>t.response))}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e,request_id:e.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class X{constructor({baseURL:t,maxRetries:e=2,timeout:n=6e5,httpAgent:o,fetch:i}){this.baseURL=t,this.maxRetries=st("maxRetries",e),this.timeout=st("timeout",n),this.httpAgent=o,this.fetch=i??r}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...et(),...this.authHeaders(t)}}validateHeaders(t,e){}defaultIdempotencyKey(){return`stainless-node-retry-${dt()}`}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,r){return this.request(Promise.resolve(r).then((async r=>{const n=r&&W(r?.body)?new DataView(await r.body.arrayBuffer()):r?.body instanceof DataView?r.body:r?.body instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r?.body)?new DataView(r.body.buffer):r?.body;return{method:t,path:e,...r,body:n}})))}getAPIList(t,e,r){return this.requestAPIList(e,{method:"get",path:t,...r})}calculateContentLength(t){if("string"==typeof t){if("undefined"!=typeof Buffer)return Buffer.byteLength(t,"utf8").toString();if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:e=0}={}){t={...t};const{method:r,path:n,query:o,headers:s={}}=t,a=ArrayBuffer.isView(t.body)||t.__binaryRequest&&"string"==typeof t.body?t.body:U(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,c=this.calculateContentLength(a),u=this.buildURL(n,o);"timeout"in t&&st("timeout",t.timeout),t.timeout=t.timeout??this.timeout;const l=t.httpAgent??this.httpAgent??i(u),h=t.timeout+1e3;return"number"==typeof l?.options?.timeout&&h>(l.options.timeout??0)&&(l.options.timeout=h),this.idempotencyHeader&&"get"!==r&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey),{req:{method:r,...a&&{body:a},headers:this.buildHeaders({options:t,headers:s,contentLength:c,retryCount:e}),...l&&{agent:l},signal:t.signal??null},url:u,timeout:t.timeout}}buildHeaders({options:t,headers:r,contentLength:n,retryCount:o}){const i={};n&&(i["content-length"]=n);const s=this.defaultHeaders(t);return ht(i,s),ht(i,r),U(t.body)&&"node"!==e&&delete i["content-type"],void 0===pt(s,"x-stainless-retry-count")&&void 0===pt(r,"x-stainless-retry-count")&&(i["x-stainless-retry-count"]=String(o)),void 0===pt(s,"x-stainless-timeout")&&void 0===pt(r,"x-stainless-timeout")&&t.timeout&&(i["x-stainless-timeout"]=String(t.timeout)),this.validateHeaders(i,r),i}_calculateNonstreamingTimeout(t){if(3600*t/128e3>600)throw new y("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-python#streaming-responses for more details");return 6e5}async prepareOptions(t){}async prepareRequest(t,{url:e,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map((t=>[...t]))):{...t}:{}}makeStatusError(t,e,r,n){return g.generate(t,e,r,n)}request(t,e=null){return new G(this.makeRequest(t,e))}async makeRequest(t,e){const r=await t,n=r.maxRetries??this.maxRetries;null==e&&(e=n),await this.prepareOptions(r);const{req:o,url:i,timeout:s}=this.buildRequest(r,{retryCount:n-e});if(await this.prepareRequest(o,{url:i,options:r}),ft("request",i,r,o.headers),r.signal?.aborted)throw new v;const a=new AbortController,c=await this.fetchWithTimeout(i,o,s,a).catch(at);if(c instanceof Error){if(r.signal?.aborted)throw new v;if(e)return this.retryRequest(r,e);if("AbortError"===c.name)throw new b;throw new w({cause:c})}const u=V(c.headers);if(!c.ok){if(e&&this.shouldRetry(c))return ft(`response (error; retrying, ${e} attempts remaining)`,c.status,i,u),this.retryRequest(r,e,u);const t=await c.text().catch((t=>at(t).message)),n=rt(t),o=n?void 0:t;throw ft(`response (error; ${e?"(error; no more retries left)":"(error; not retryable)"})`,c.status,i,u,o),this.makeStatusError(c.status,n,o,u)}return{response:c,options:r,controller:a}}requestAPIList(t,e){const r=this.makeRequest(e,null);return new K(this,r,t)}buildURL(t,e){const r=ot(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),n=this.defaultQuery();return ut(n)||(e={...n,...e}),"object"==typeof e&&e&&!Array.isArray(e)&&(r.search=this.stringifyQuery(e)),r.toString()}stringifyQuery(t){return Object.entries(t).filter((([t,e])=>void 0!==e)).map((([t,e])=>{if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return`${encodeURIComponent(t)}=${encodeURIComponent(e)}`;if(null===e)return`${encodeURIComponent(t)}=`;throw new y(`Cannot stringify type ${typeof e}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}async fetchWithTimeout(t,e,r,n){const{signal:o,...i}=e||{};o&&o.addEventListener("abort",(()=>n.abort()));const s=setTimeout((()=>n.abort()),r),a={signal:n.signal,...i};a.method&&(a.method=a.method.toUpperCase());const c=setTimeout((()=>{if(a&&a?.agent?.sockets)for(const t of Object.values(a?.agent?.sockets).flat())t?.setKeepAlive&&t.setKeepAlive(!0,6e4)}),6e4);return this.fetch.call(void 0,t,a).finally((()=>{clearTimeout(s),clearTimeout(c)}))}shouldRetry(t){const e=t.headers.get("x-should-retry");return"true"===e||"false"!==e&&(408===t.status||409===t.status||429===t.status||t.status>=500)}async retryRequest(t,e,r){let n;const o=r?.["retry-after-ms"];if(o){const t=parseFloat(o);Number.isNaN(t)||(n=t)}const i=r?.["retry-after"];if(i&&!n){const t=parseFloat(i);n=Number.isNaN(t)?Date.parse(i)-Date.now():1e3*t}if(!(n&&0<=n&&n<6e4)){const r=t.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(e,r)}return await it(n),this.makeRequest(t,e-1)}calculateDefaultRetryTimeoutMillis(t,e){const r=e-t;return Math.min(.5*Math.pow(2,r),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${t}`}}class J{constructor(t,e,r,n){F.set(this,void 0),function(t,e,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?o.call(t,r):o?o.value=r:e.set(t,r)}(this,F,t,"f"),this.options=n,this.response=e,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new y("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const e={...this.options};if("params"in t&&"object"==typeof e.query)e.query={...e.query,...t.params};else if("url"in t){const r=[...Object.entries(e.query||{}),...t.url.searchParams.entries()];for(const[e,n]of r)t.url.searchParams.set(e,n);e.query=void 0,e.path=t.url.toString()}return await function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)}(this,F,"f").requestAPIList(this.constructor,e)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(F=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const e of t.getPaginatedItems())yield e}}class K extends G{constructor(t,e,r){super(e,(async e=>new r(t,e.response,await D(e),e.options)))}async*[Symbol.asyncIterator](){const t=await(this);for await(const e of t)yield e}}const V=t=>new Proxy(Object.fromEntries(t.entries()),{get(t,e){const r=e.toString();return t[r.toLowerCase()]||t[r]}}),z={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Y=t=>"object"==typeof t&&null!==t&&!ut(t)&&Object.keys(t).every((t=>lt(z,t))),Q=t=>"x32"===t?"x32":"x86_64"===t||"x64"===t?"x64":"arm"===t?"arm":"aarch64"===t||"arm64"===t?"arm64":t?`other:${t}`:"unknown",Z=t=>(t=t.toLowerCase()).includes("ios")?"iOS":"android"===t?"Android":"darwin"===t?"MacOS":"win32"===t?"Windows":"freebsd"===t?"FreeBSD":"openbsd"===t?"OpenBSD":"linux"===t?"Linux":t?`Other:${t}`:"Unknown";let tt;const et=()=>tt??(tt=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":t,"X-Stainless-OS":Z(Deno.build.os),"X-Stainless-Arch":Q(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":t,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":t,"X-Stainless-OS":Z(process.platform),"X-Stainless-Arch":Q(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"==typeof navigator||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const t=r.exec(navigator.userAgent);if(t)return{browser:e,version:`${t[1]||0}.${t[2]||0}.${t[3]||0}`}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":t,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":t,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),rt=t=>{try{return JSON.parse(t)}catch(t){return}},nt=/^[a-z][a-z0-9+.-]*:/i,ot=t=>nt.test(t),it=t=>new Promise((e=>setTimeout(e,t))),st=(t,e)=>{if("number"!=typeof e||!Number.isInteger(e))throw new y(`${t} must be an integer`);if(e<0)throw new y(`${t} must be a positive integer`);return e},at=t=>{if(t instanceof Error)return t;if("object"==typeof t&&null!==t)try{return new Error(JSON.stringify(t))}catch{}return new Error(String(t))},ct=t=>"undefined"!=typeof process?process.env?.[t]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(t)?.trim():void 0;function ut(t){if(!t)return!0;for(const e in t)return!1;return!0}function lt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ht(t,e){for(const r in e){if(!lt(e,r))continue;const n=r.toLowerCase();if(!n)continue;const o=e[r];null===o?delete t[n]:void 0!==o&&(t[n]=o)}}function ft(t,...e){"undefined"!=typeof process&&"true"===process?.env?.DEBUG&&console.log(`Anthropic:DEBUG:${t}`,...e)}const dt=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),pt=(t,e)=>{const r=e.toLowerCase();if((t=>"function"==typeof t?.get)(t)){const n=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,((t,e,r)=>e+r.toUpperCase()));for(const o of[e,r,e.toUpperCase(),n]){const e=t.get(o);if(e)return e}}for(const[n,o]of Object.entries(t))if(n.toLowerCase()===r)return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${e} header, using the first entry.`),o[0]):o};class mt{constructor(t){this._client=t}}class yt extends mt{create(t,e){return this._client.post("/v1/complete",{body:t,timeout:this._client._options.timeout??6e5,...e,stream:t.stream??!1})}}class gt extends J{constructor(t,e,r,n){super(t,e,r,n),this.data=r.data||[],this.has_more=r.has_more||!1,this.first_id=r.first_id||null,this.last_id=r.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const e=Object.fromEntries(t.url.searchParams);return Object.keys(e).length?e:null}nextPageInfo(){if(this.options.query?.before_id){const t=this.first_id;return t?{params:{before_id:t}}:null}const t=this.last_id;return t?{params:{after_id:t}}:null}}class vt{constructor(t,e){this.iterator=t,this.controller=e}async*decoder(){const t=new T;for await(const e of this.iterator)for(const r of t.decode(e))yield JSON.parse(r);for(const e of t.flush())yield JSON.parse(e)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(t,e){if(!t.body)throw e.abort(),new y("Attempted to iterate over a response with no body");return new vt(N(t.body),e)}}class wt extends mt{create(t,e){return this._client.post("/v1/messages/batches",{body:t,...e})}retrieve(t,e){return this._client.get(`/v1/messages/batches/${t}`,e)}list(t={},e){return Y(t)?this.list({},t):this._client.getAPIList("/v1/messages/batches",bt,{query:t,...e})}delete(t,e){return this._client.delete(`/v1/messages/batches/${t}`,e)}cancel(t,e){return this._client.post(`/v1/messages/batches/${t}/cancel`,e)}async results(t,e){const r=await this.retrieve(t);if(!r.results_url)throw new y(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);return this._client.get(r.results_url,{...e,headers:{Accept:"application/binary",...e?.headers},__binaryResponse:!0})._thenUnwrap(((t,e)=>vt.fromResponse(e.response,e.controller)))}}class bt extends gt{}wt.MessageBatchesPage=bt;const xt=t=>{if(0===t.length)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),xt(t);case"number":let r=e.value[e.value.length-1];if("."===r||"-"===r)return t=t.slice(0,t.length-1),xt(t);case"string":let n=t[t.length-2];if("delimiter"===n?.type)return t=t.slice(0,t.length-1),xt(t);if("brace"===n?.type&&"{"===n.value)return t=t.slice(0,t.length-1),xt(t);break;case"delimiter":return t=t.slice(0,t.length-1),xt(t)}return t},_t=t=>JSON.parse((t=>{let e="";return t.map((t=>{"string"===t.type?e+='"'+t.value+'"':e+=t.value})),e})((t=>{let e=[];return t.map((t=>{"brace"===t.type&&("{"===t.value?e.push("}"):e.splice(e.lastIndexOf("}"),1)),"paren"===t.type&&("["===t.value?e.push("]"):e.splice(e.lastIndexOf("]"),1))})),e.length>0&&e.reverse().map((e=>{"}"===e?t.push({type:"brace",value:"}"}):"]"===e&&t.push({type:"paren",value:"]"})})),t})(xt((t=>{let e=0,r=[];for(;e<t.length;){let n=t[e];if("\\"===n){e++;continue}if("{"===n){r.push({type:"brace",value:"{"}),e++;continue}if("}"===n){r.push({type:"brace",value:"}"}),e++;continue}if("["===n){r.push({type:"paren",value:"["}),e++;continue}if("]"===n){r.push({type:"paren",value:"]"}),e++;continue}if(":"===n){r.push({type:"separator",value:":"}),e++;continue}if(","===n){r.push({type:"delimiter",value:","}),e++;continue}if('"'===n){let o="",i=!1;for(n=t[++e];'"'!==n;){if(e===t.length){i=!0;break}if("\\"===n){if(e++,e===t.length){i=!0;break}o+=n+t[e],n=t[++e]}else o+=n,n=t[++e]}n=t[++e],i||r.push({type:"string",value:o});continue}if(n&&/\s/.test(n)){e++;continue}let o=/[0-9]/;if(n&&o.test(n)||"-"===n||"."===n){let i="";for("-"===n&&(i+=n,n=t[++e]);n&&o.test(n)||"."===n;)i+=n,n=t[++e];r.push({type:"number",value:i});continue}let i=/[a-z]/i;if(n&&i.test(n)){let o="";for(;n&&i.test(n)&&e!==t.length;)o+=n,n=t[++e];if("true"!=o&&"false"!=o&&"null"!==o){e++;continue}r.push({type:"name",value:o})}else e++}return r})(t)))));var kt,Et,St,Lt,Pt,At,Rt,jt,Ot,Tt,It,Mt,Nt,qt,Ct,Wt,Bt,$t,Ut,Ft,Dt,Ht,Gt=function(t,e,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(t,r):o?o.value=r:e.set(t,r),r},Xt=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};const Jt="__json_buf";class Kt{constructor(){kt.add(this),this.messages=[],this.receivedMessages=[],Et.set(this,void 0),this.controller=new AbortController,St.set(this,void 0),Lt.set(this,(()=>{})),Pt.set(this,(()=>{})),At.set(this,void 0),Rt.set(this,(()=>{})),jt.set(this,(()=>{})),Ot.set(this,{}),Tt.set(this,!1),It.set(this,!1),Mt.set(this,!1),Nt.set(this,!1),qt.set(this,void 0),Ct.set(this,void 0),$t.set(this,(t=>{if(Gt(this,It,!0,"f"),t instanceof Error&&"AbortError"===t.name&&(t=new v),t instanceof v)return Gt(this,Mt,!0,"f"),this._emit("abort",t);if(t instanceof y)return this._emit("error",t);if(t instanceof Error){const e=new y(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new y(String(t)))})),Gt(this,St,new Promise(((t,e)=>{Gt(this,Lt,t,"f"),Gt(this,Pt,e,"f")})),"f"),Gt(this,At,new Promise(((t,e)=>{Gt(this,Rt,t,"f"),Gt(this,jt,e,"f")})),"f"),Xt(this,St,"f").catch((()=>{})),Xt(this,At,"f").catch((()=>{}))}get response(){return Xt(this,qt,"f")}get request_id(){return Xt(this,Ct,"f")}async withResponse(){const t=await Xt(this,St,"f");if(!t)throw new Error("Could not resolve a `Response` object");return{data:this,response:t,request_id:t.headers.get("request-id")}}static fromReadableStream(t){const e=new Kt;return e._run((()=>e._fromReadableStream(t))),e}static createMessage(t,e,r){const n=new Kt;for(const t of e.messages)n._addMessageParam(t);return n._run((()=>n._createMessage(t,{...e,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}}))),n}_run(t){t().then((()=>{this._emitFinal(),this._emit("end")}),Xt(this,$t,"f"))}_addMessageParam(t){this.messages.push(t)}_addMessage(t,e=!0){this.receivedMessages.push(t),e&&this._emit("message",t)}async _createMessage(t,e,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),Xt(this,kt,"m",Ut).call(this);const{response:o,data:i}=await t.create({...e,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(o);for await(const t of i)Xt(this,kt,"m",Ft).call(this,t);if(i.controller.signal?.aborted)throw new v;Xt(this,kt,"m",Dt).call(this)}_connected(t){this.ended||(Gt(this,qt,t,"f"),Gt(this,Ct,t?.headers.get("request-id"),"f"),Xt(this,Lt,"f").call(this,t),this._emit("connect"))}get ended(){return Xt(this,Tt,"f")}get errored(){return Xt(this,It,"f")}get aborted(){return Xt(this,Mt,"f")}abort(){this.controller.abort()}on(t,e){return(Xt(this,Ot,"f")[t]||(Xt(this,Ot,"f")[t]=[])).push({listener:e}),this}off(t,e){const r=Xt(this,Ot,"f")[t];if(!r)return this;const n=r.findIndex((t=>t.listener===e));return n>=0&&r.splice(n,1),this}once(t,e){return(Xt(this,Ot,"f")[t]||(Xt(this,Ot,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise(((e,r)=>{Gt(this,Nt,!0,"f"),"error"!==t&&this.once("error",r),this.once(t,e)}))}async done(){Gt(this,Nt,!0,"f"),await Xt(this,At,"f")}get currentMessage(){return Xt(this,Et,"f")}async finalMessage(){return await this.done(),Xt(this,kt,"m",Wt).call(this)}async finalText(){return await this.done(),Xt(this,kt,"m",Bt).call(this)}_emit(t,...e){if(Xt(this,Tt,"f"))return;"end"===t&&(Gt(this,Tt,!0,"f"),Xt(this,Rt,"f").call(this));const r=Xt(this,Ot,"f")[t];if(r&&(Xt(this,Ot,"f")[t]=r.filter((t=>!t.once)),r.forEach((({listener:t})=>t(...e)))),"abort"===t){const t=e[0];return Xt(this,Nt,"f")||r?.length||Promise.reject(t),Xt(this,Pt,"f").call(this,t),Xt(this,jt,"f").call(this,t),void this._emit("end")}if("error"===t){const t=e[0];Xt(this,Nt,"f")||r?.length||Promise.reject(t),Xt(this,Pt,"f").call(this,t),Xt(this,jt,"f").call(this,t),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",Xt(this,kt,"m",Wt).call(this))}async _fromReadableStream(t,e){const r=e?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),Xt(this,kt,"m",Ut).call(this),this._connected(null);const n=q.fromReadableStream(t,this.controller);for await(const t of n)Xt(this,kt,"m",Ft).call(this,t);if(n.controller.signal?.aborted)throw new v;Xt(this,kt,"m",Dt).call(this)}[(Et=new WeakMap,St=new WeakMap,Lt=new WeakMap,Pt=new WeakMap,At=new WeakMap,Rt=new WeakMap,jt=new WeakMap,Ot=new WeakMap,Tt=new WeakMap,It=new WeakMap,Mt=new WeakMap,Nt=new WeakMap,qt=new WeakMap,Ct=new WeakMap,$t=new WeakMap,kt=new WeakSet,Wt=function(){if(0===this.receivedMessages.length)throw new y("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Bt=function(){if(0===this.receivedMessages.length)throw new y("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter((t=>"text"===t.type)).map((t=>t.text));if(0===t.length)throw new y("stream ended without producing a content block with type=text");return t.join(" ")},Ut=function(){this.ended||Gt(this,Et,void 0,"f")},Ft=function(t){if(this.ended)return;const e=Xt(this,kt,"m",Ht).call(this,t);switch(this._emit("streamEvent",t,e),t.type){case"content_block_delta":{const r=e.content.at(-1);switch(t.delta.type){case"text_delta":"text"===r.type&&this._emit("text",t.delta.text,r.text||"");break;case"citations_delta":"text"===r.type&&this._emit("citation",t.delta.citation,r.citations??[]);break;case"input_json_delta":"tool_use"===r.type&&r.input&&this._emit("inputJson",t.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",t.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:t.delta}break}case"message_stop":this._addMessageParam(e),this._addMessage(e,!0);break;case"content_block_stop":this._emit("contentBlock",e.content.at(-1));break;case"message_start":Gt(this,Et,e,"f")}},Dt=function(){if(this.ended)throw new y("stream has ended, this shouldn't happen");const t=Xt(this,Et,"f");if(!t)throw new y("request ended without sending any chunks");return Gt(this,Et,void 0,"f"),t},Ht=function(t){let e=Xt(this,Et,"f");if("message_start"===t.type){if(e)throw new y(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!e)throw new y(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":case"content_block_stop":return e;case"message_delta":return e.stop_reason=t.delta.stop_reason,e.stop_sequence=t.delta.stop_sequence,e.usage.output_tokens=t.usage.output_tokens,e;case"content_block_start":return e.content.push(t.content_block),e;case"content_block_delta":{const r=e.content.at(t.index);switch(t.delta.type){case"text_delta":"text"===r?.type&&(r.text+=t.delta.text);break;case"citations_delta":"text"===r?.type&&(r.citations??(r.citations=[]),r.citations.push(t.delta.citation));break;case"input_json_delta":if("tool_use"===r?.type){let e=r[Jt]||"";e+=t.delta.partial_json,Object.defineProperty(r,Jt,{value:e,enumerable:!1,writable:!0}),e&&(r.input=_t(e))}break;case"thinking_delta":"thinking"===r?.type&&(r.thinking+=t.delta.thinking);break;case"signature_delta":"thinking"===r?.type&&(r.signature=t.delta.signature);break;default:t.delta}return e}}},Symbol.asyncIterator)](){const t=[],e=[];let r=!1;return this.on("streamEvent",(r=>{const n=e.shift();n?n.resolve(r):t.push(r)})),this.on("end",(()=>{r=!0;for(const t of e)t.resolve(void 0);e.length=0})),this.on("abort",(t=>{r=!0;for(const r of e)r.reject(t);e.length=0})),this.on("error",(t=>{r=!0;for(const r of e)r.reject(t);e.length=0})),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise(((t,r)=>e.push({resolve:t,reject:r}))).then((t=>t?{value:t,done:!1}:{value:void 0,done:!0})),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new q(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class Vt extends mt{constructor(){super(...arguments),this.batches=new wt(this._client)}create(t,e){return t.model in zt&&console.warn(`The model '${t.model}' is deprecated and will reach end-of-life on ${zt[t.model]}\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`),this._client.post("/v1/messages",{body:t,timeout:this._client._options.timeout??(t.stream?6e5:this._client._calculateNonstreamingTimeout(t.max_tokens)),...e,stream:t.stream??!1})}stream(t,e){return Kt.createMessage(this,t,e)}countTokens(t,e){return this._client.post("/v1/messages/count_tokens",{body:t,...e})}}const zt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};Vt.Batches=wt,Vt.MessageBatchesPage=bt;class Yt extends mt{retrieve(t,e){return this._client.get(`/v1/models/${t}`,e)}list(t={},e){return Y(t)?this.list({},t):this._client.getAPIList("/v1/models",Qt,{query:t,...e})}}class Qt extends gt{}Yt.ModelInfosPage=Qt;class Zt extends mt{retrieve(t,e){return this._client.get(`/v1/models/${t}?beta=true`,e)}list(t={},e){return Y(t)?this.list({},t):this._client.getAPIList("/v1/models?beta=true",te,{query:t,...e})}}class te extends gt{}Zt.BetaModelInfosPage=te;class ee extends mt{create(t,e){const{betas:r,...n}=t;return this._client.post("/v1/messages/batches?beta=true",{body:n,...e,headers:{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString(),...e?.headers}})}retrieve(t,e={},r){if(Y(e))return this.retrieve(t,{},e);const{betas:n}=e;return this._client.get(`/v1/messages/batches/${t}?beta=true`,{...r,headers:{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString(),...r?.headers}})}list(t={},e){if(Y(t))return this.list({},t);const{betas:r,...n}=t;return this._client.getAPIList("/v1/messages/batches?beta=true",re,{query:n,...e,headers:{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString(),...e?.headers}})}delete(t,e={},r){if(Y(e))return this.delete(t,{},e);const{betas:n}=e;return this._client.delete(`/v1/messages/batches/${t}?beta=true`,{...r,headers:{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString(),...r?.headers}})}cancel(t,e={},r){if(Y(e))return this.cancel(t,{},e);const{betas:n}=e;return this._client.post(`/v1/messages/batches/${t}/cancel?beta=true`,{...r,headers:{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString(),...r?.headers}})}async results(t,e={},r){if(Y(e))return this.results(t,{},e);const n=await this.retrieve(t);if(!n.results_url)throw new y(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);const{betas:o}=e;return this._client.get(n.results_url,{...r,headers:{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary",...r?.headers},__binaryResponse:!0})._thenUnwrap(((t,e)=>vt.fromResponse(e.response,e.controller)))}}class re extends gt{}ee.BetaMessageBatchesPage=re;var ne,oe,ie,se,ae,ce,ue,le,he,fe,de,pe,me,ye,ge,ve,we,be,xe,_e,ke,Ee,Se=function(t,e,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(t,r):o?o.value=r:e.set(t,r),r},Le=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};const Pe="__json_buf";class Ae{constructor(){ne.add(this),this.messages=[],this.receivedMessages=[],oe.set(this,void 0),this.controller=new AbortController,ie.set(this,void 0),se.set(this,(()=>{})),ae.set(this,(()=>{})),ce.set(this,void 0),ue.set(this,(()=>{})),le.set(this,(()=>{})),he.set(this,{}),fe.set(this,!1),de.set(this,!1),pe.set(this,!1),me.set(this,!1),ye.set(this,void 0),ge.set(this,void 0),be.set(this,(t=>{if(Se(this,de,!0,"f"),t instanceof Error&&"AbortError"===t.name&&(t=new v),t instanceof v)return Se(this,pe,!0,"f"),this._emit("abort",t);if(t instanceof y)return this._emit("error",t);if(t instanceof Error){const e=new y(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new y(String(t)))})),Se(this,ie,new Promise(((t,e)=>{Se(this,se,t,"f"),Se(this,ae,e,"f")})),"f"),Se(this,ce,new Promise(((t,e)=>{Se(this,ue,t,"f"),Se(this,le,e,"f")})),"f"),Le(this,ie,"f").catch((()=>{})),Le(this,ce,"f").catch((()=>{}))}get response(){return Le(this,ye,"f")}get request_id(){return Le(this,ge,"f")}async withResponse(){const t=await Le(this,ie,"f");if(!t)throw new Error("Could not resolve a `Response` object");return{data:this,response:t,request_id:t.headers.get("request-id")}}static fromReadableStream(t){const e=new Ae;return e._run((()=>e._fromReadableStream(t))),e}static createMessage(t,e,r){const n=new Ae;for(const t of e.messages)n._addMessageParam(t);return n._run((()=>n._createMessage(t,{...e,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}}))),n}_run(t){t().then((()=>{this._emitFinal(),this._emit("end")}),Le(this,be,"f"))}_addMessageParam(t){this.messages.push(t)}_addMessage(t,e=!0){this.receivedMessages.push(t),e&&this._emit("message",t)}async _createMessage(t,e,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),Le(this,ne,"m",xe).call(this);const{response:o,data:i}=await t.create({...e,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(o);for await(const t of i)Le(this,ne,"m",_e).call(this,t);if(i.controller.signal?.aborted)throw new v;Le(this,ne,"m",ke).call(this)}_connected(t){this.ended||(Se(this,ye,t,"f"),Se(this,ge,t?.headers.get("request-id"),"f"),Le(this,se,"f").call(this,t),this._emit("connect"))}get ended(){return Le(this,fe,"f")}get errored(){return Le(this,de,"f")}get aborted(){return Le(this,pe,"f")}abort(){this.controller.abort()}on(t,e){return(Le(this,he,"f")[t]||(Le(this,he,"f")[t]=[])).push({listener:e}),this}off(t,e){const r=Le(this,he,"f")[t];if(!r)return this;const n=r.findIndex((t=>t.listener===e));return n>=0&&r.splice(n,1),this}once(t,e){return(Le(this,he,"f")[t]||(Le(this,he,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise(((e,r)=>{Se(this,me,!0,"f"),"error"!==t&&this.once("error",r),this.once(t,e)}))}async done(){Se(this,me,!0,"f"),await Le(this,ce,"f")}get currentMessage(){return Le(this,oe,"f")}async finalMessage(){return await this.done(),Le(this,ne,"m",ve).call(this)}async finalText(){return await this.done(),Le(this,ne,"m",we).call(this)}_emit(t,...e){if(Le(this,fe,"f"))return;"end"===t&&(Se(this,fe,!0,"f"),Le(this,ue,"f").call(this));const r=Le(this,he,"f")[t];if(r&&(Le(this,he,"f")[t]=r.filter((t=>!t.once)),r.forEach((({listener:t})=>t(...e)))),"abort"===t){const t=e[0];return Le(this,me,"f")||r?.length||Promise.reject(t),Le(this,ae,"f").call(this,t),Le(this,le,"f").call(this,t),void this._emit("end")}if("error"===t){const t=e[0];Le(this,me,"f")||r?.length||Promise.reject(t),Le(this,ae,"f").call(this,t),Le(this,le,"f").call(this,t),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",Le(this,ne,"m",ve).call(this))}async _fromReadableStream(t,e){const r=e?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),Le(this,ne,"m",xe).call(this),this._connected(null);const n=q.fromReadableStream(t,this.controller);for await(const t of n)Le(this,ne,"m",_e).call(this,t);if(n.controller.signal?.aborted)throw new v;Le(this,ne,"m",ke).call(this)}[(oe=new WeakMap,ie=new WeakMap,se=new WeakMap,ae=new WeakMap,ce=new WeakMap,ue=new WeakMap,le=new WeakMap,he=new WeakMap,fe=new WeakMap,de=new WeakMap,pe=new WeakMap,me=new WeakMap,ye=new WeakMap,ge=new WeakMap,be=new WeakMap,ne=new WeakSet,ve=function(){if(0===this.receivedMessages.length)throw new y("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},we=function(){if(0===this.receivedMessages.length)throw new y("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter((t=>"text"===t.type)).map((t=>t.text));if(0===t.length)throw new y("stream ended without producing a content block with type=text");return t.join(" ")},xe=function(){this.ended||Se(this,oe,void 0,"f")},_e=function(t){if(this.ended)return;const e=Le(this,ne,"m",Ee).call(this,t);switch(this._emit("streamEvent",t,e),t.type){case"content_block_delta":{const r=e.content.at(-1);switch(t.delta.type){case"text_delta":"text"===r.type&&this._emit("text",t.delta.text,r.text||"");break;case"citations_delta":"text"===r.type&&this._emit("citation",t.delta.citation,r.citations??[]);break;case"input_json_delta":"tool_use"===r.type&&r.input&&this._emit("inputJson",t.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",t.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:t.delta}break}case"message_stop":this._addMessageParam(e),this._addMessage(e,!0);break;case"content_block_stop":this._emit("contentBlock",e.content.at(-1));break;case"message_start":Se(this,oe,e,"f")}},ke=function(){if(this.ended)throw new y("stream has ended, this shouldn't happen");const t=Le(this,oe,"f");if(!t)throw new y("request ended without sending any chunks");return Se(this,oe,void 0,"f"),t},Ee=function(t){let e=Le(this,oe,"f");if("message_start"===t.type){if(e)throw new y(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!e)throw new y(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":case"content_block_stop":return e;case"message_delta":return e.stop_reason=t.delta.stop_reason,e.stop_sequence=t.delta.stop_sequence,e.usage.output_tokens=t.usage.output_tokens,e;case"content_block_start":return e.content.push(t.content_block),e;case"content_block_delta":{const r=e.content.at(t.index);switch(t.delta.type){case"text_delta":"text"===r?.type&&(r.text+=t.delta.text);break;case"citations_delta":"text"===r?.type&&(r.citations??(r.citations=[]),r.citations.push(t.delta.citation));break;case"input_json_delta":if("tool_use"===r?.type){let e=r[Pe]||"";e+=t.delta.partial_json,Object.defineProperty(r,Pe,{value:e,enumerable:!1,writable:!0}),e&&(r.input=_t(e))}break;case"thinking_delta":"thinking"===r?.type&&(r.thinking+=t.delta.thinking);break;case"signature_delta":"thinking"===r?.type&&(r.signature=t.delta.signature);break;default:t.delta}return e}}},Symbol.asyncIterator)](){const t=[],e=[];let r=!1;return this.on("streamEvent",(r=>{const n=e.shift();n?n.resolve(r):t.push(r)})),this.on("end",(()=>{r=!0;for(const t of e)t.resolve(void 0);e.length=0})),this.on("abort",(t=>{r=!0;for(const r of e)r.reject(t);e.length=0})),this.on("error",(t=>{r=!0;for(const r of e)r.reject(t);e.length=0})),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise(((t,r)=>e.push({resolve:t,reject:r}))).then((t=>t?{value:t,done:!1}:{value:void 0,done:!0})),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new q(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const Re={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};class je extends mt{constructor(){super(...arguments),this.batches=new ee(this._client)}create(t,e){const{betas:r,...n}=t;return n.model in Re&&console.warn(`The model '${n.model}' is deprecated and will reach end-of-life on ${Re[n.model]}\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`),this._client.post("/v1/messages?beta=true",{body:n,timeout:this._client._options.timeout??(n.stream?6e5:this._client._calculateNonstreamingTimeout(n.max_tokens)),...e,headers:{...null!=r?.toString()?{"anthropic-beta":r?.toString()}:void 0,...e?.headers},stream:t.stream??!1})}stream(t,e){return Ae.createMessage(this,t,e)}countTokens(t,e){const{betas:r,...n}=t;return this._client.post("/v1/messages/count_tokens?beta=true",{body:n,...e,headers:{"anthropic-beta":[...r??[],"token-counting-2024-11-01"].toString(),...e?.headers}})}}je.Batches=ee,je.BetaMessageBatchesPage=re;class Oe extends mt{constructor(){super(...arguments),this.models=new Zt(this._client),this.messages=new je(this._client)}}var Te;Oe.Models=Zt,Oe.BetaModelInfosPage=te,Oe.Messages=je;class Ie extends X{constructor({baseURL:t=ct("ANTHROPIC_BASE_URL"),apiKey:e=ct("ANTHROPIC_API_KEY")??null,authToken:r=ct("ANTHROPIC_AUTH_TOKEN")??null,...n}={}){const o={apiKey:e,authToken:r,...n,baseURL:t||"https://api.anthropic.com"};if(!o.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new y("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new yt(this),this.messages=new Vt(this),this.models=new Yt(this),this.beta=new Oe(this),this._options=o,this.apiKey=e,this.authToken=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01",...this._options.defaultHeaders}}validateHeaders(t,e){if(!(this.apiKey&&t["x-api-key"]||null===e["x-api-key"]||this.authToken&&t.authorization||null===e.authorization))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(t){const e=this.apiKeyAuth(t),r=this.bearerAuth(t);return null==e||ut(e)?null==r||ut(r)?{}:r:e}apiKeyAuth(t){return null==this.apiKey?{}:{"X-Api-Key":this.apiKey}}bearerAuth(t){return null==this.authToken?{}:{Authorization:`Bearer ${this.authToken}`}}}Te=Ie,Ie.Anthropic=Te,Ie.HUMAN_PROMPT="\n\nHuman:",Ie.AI_PROMPT="\n\nAssistant:",Ie.DEFAULT_TIMEOUT=6e5,Ie.AnthropicError=y,Ie.APIError=g,Ie.APIConnectionError=w,Ie.APIConnectionTimeoutError=b,Ie.APIUserAbortError=v,Ie.NotFoundError=E,Ie.ConflictError=S,Ie.RateLimitError=P,Ie.BadRequestError=x,Ie.AuthenticationError=_,Ie.InternalServerError=A,Ie.PermissionDeniedError=k,Ie.UnprocessableEntityError=L,Ie.toFile=async function(t,e,r){if((t=>null!=t&&"object"==typeof t&&"string"==typeof t.name&&"number"==typeof t.lastModified&&W(t))(t=await t))return t;if((t=>null!=t&&"object"==typeof t&&"string"==typeof t.url&&"function"==typeof t.blob)(t)){const o=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const i=W(o)?[await o.arrayBuffer()]:[o];return new n(i,e,r)}const o=await async function(t){let e=[];if("string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(W(t))e.push(await t.arrayBuffer());else{if(!$(t))throw new Error(`Unexpected data type: ${typeof t}; constructor: ${t?.constructor?.name}; props: ${function(t){return`[${Object.getOwnPropertyNames(t).map((t=>`"${t}"`)).join(", ")}]`}(t)}`);for await(const r of t)e.push(r)}return e}(t);if(e||(e=function(t){return B(t.name)||B(t.filename)||B(t.path)?.split(/[\\/]/).pop()}(t)??"unknown_file"),!r?.type){const t=o[0]?.type;"string"==typeof t&&(r={...r,type:t})}return new n(o,e,r)},Ie.fileFromPath=s,Ie.Completions=yt,Ie.Messages=Vt,Ie.Models=Yt,Ie.ModelInfosPage=Qt,Ie.Beta=Oe;const{HUMAN_PROMPT:Me,AI_PROMPT:Ne}=Ie;var qe=Ie;function Ce(t){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}function We(){We=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,s=Object.create(i.prototype),a=new j(n||[]);return o(s,"_invoke",{value:L(t,r,a)}),s}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function g(){}function v(){}function w(){}var b={};u(b,s,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(O([])));_&&_!==r&&n.call(_,s)&&(b=_);var k=w.prototype=g.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,s,a){var c=h(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ce(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(l).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=f;return function(i,s){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===i)throw s;return{value:t,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var c=P(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ce(e)+" is not iterable")}return v.prototype=w,o(k,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:v,configurable:!0}),v.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),u(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},E(k),u(k,c,"Generator"),u(k,s,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function Be(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return $e(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$e(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function $e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Ue(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function Fe(t,e,r){return De.apply(this,arguments)}function De(){var t;return t=We().mark((function t(e,r,n){var o,i,s,a,c,u,l;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=new qe({apiKey:n,dangerouslyAllowBrowser:!0}),t.next=4,o.messages.create({model:"claude-3-haiku-20240307",max_tokens:2e3,system:"You are a helpful document assistant. You can view document content and make changes to it. You have the following tools available: 1) text_editor - for replacing text in the document, 2) document_writer - for writing content directly to the document. Always use document_writer when you need to add substantial content to the document. IMPORTANT: When making small changes like updating dates or specific text, always use text_editor with str_replace to preserve the existing formatting. When using document_writer with replace_all, always preserve the original document structure including paragraph breaks, line spacing, and indentation. Never collapse formatted text into a single paragraph when making edits.",messages:[{role:"user",content:[{type:"text",text:"Document content: ".concat(r,"\n\nUser request: ").concat(e)}]}],tools:[{name:"text_editor",description:"Tool for viewing and editing document content",input_schema:{type:"object",properties:{command:{type:"string",enum:["view","str_replace"],description:"The command to execute: 'view' to see document content, 'str_replace' to replace text"},old_str:{type:"string",description:"The text to be replaced (only for str_replace command)"},new_str:{type:"string",description:"The new text to replace with (only for str_replace command)"}},required:["command"]}},{name:"document_writer",description:"Tool for writing content directly to the document",input_schema:{type:"object",properties:{content:{type:"string",description:"The content to write to the document"},position:{type:"string",enum:["start","end","replace_all"],description:"Where to insert the content: 'start' for beginning of document, 'end' for end of document, 'replace_all' to replace entire document content"},formatting:{type:"object",properties:{bold:{type:"boolean",description:"Whether the text should be bold"},italic:{type:"boolean",description:"Whether the text should be italic"},underline:{type:"boolean",description:"Whether the text should be underlined"},color:{type:"string",description:"The color of the text (e.g., 'red', '#FF0000')"},size:{type:"number",description:"The font size in points"}}}},required:["content","position"]}}]});case 4:if(i=t.sent,s="",a=[],i.content&&i.content.length>0){c=Be(i.content);try{for(c.s();!(u=c.n()).done;)"text"===(l=u.value).type?s+=l.text:"tool_use"===l.type&&a.push({name:l.name,input:l.input})}catch(t){c.e(t)}finally{c.f()}}return t.abrupt("return",{aiResponse:s,toolOperations:a});case 11:return t.prev=11,t.t0=t.catch(0),console.error("Error getting AI response:",t.t0),t.abrupt("return",{aiResponse:"Sorry, I encountered an error. Please try again.",toolOperations:[]});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})),De=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){Ue(i,n,o,s,a,"next",t)}function a(t){Ue(i,n,o,s,a,"throw",t)}s(void 0)}))},De.apply(this,arguments)}function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function Ge(){Ge=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,s=Object.create(i.prototype),a=new j(n||[]);return o(s,"_invoke",{value:L(t,r,a)}),s}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function g(){}function v(){}function w(){}var b={};u(b,s,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(O([])));_&&_!==r&&n.call(_,s)&&(b=_);var k=w.prototype=g.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,s,a){var c=h(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==He(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(l).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=f;return function(i,s){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===i)throw s;return{value:t,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var c=P(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(He(e)+" is not iterable")}return v.prototype=w,o(k,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:v,configurable:!0}),v.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),u(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},E(k),u(k,c,"Generator"),u(k,s,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function Xe(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function Je(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){Xe(i,n,o,s,a,"next",t)}function a(t){Xe(i,n,o,s,a,"throw",t)}s(void 0)}))}}function Ke(t,e,r){return Ve.apply(this,arguments)}function Ve(){return Ve=Je(Ge().mark((function t(e,r,n){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Word.run(function(){var t=Je(Ge().mark((function t(o){var i,s,a,c,u,l,h;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=o.document.body,s=e.split(/\r?\n/),"replace_all"===r&&i.clear(),a="start"===r?Word.InsertLocation.start:Word.InsertLocation.end,c=0;case 5:if(!(c<s.length)){t.next=15;break}if(""!==(u=s[c]).trim()){t.next=10;break}return i.insertParagraph("",a),t.abrupt("continue",12);case 10:l=i.insertParagraph(u,a),n&&(void 0!==n.bold&&(l.font.bold=n.bold),void 0!==n.italic&&(l.font.italic=n.italic),void 0!==n.underline&&(l.font.underline=n.underline?Word.UnderlineType.single:Word.UnderlineType.none),n.color&&(l.font.color=n.color),n.size&&(l.font.size=n.size));case 12:c++,t.next=5;break;case 15:return t.next=17,o.sync();case 17:(h=document.createElement("div")).className="status-message",h.textContent="Content added to document!",document.body.appendChild(h),setTimeout((function(){h.remove()}),3e3);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.error("Error writing to document:",t.t0),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])}))),Ve.apply(this,arguments)}function ze(){return Ye.apply(this,arguments)}function Ye(){return Ye=Je(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Word.run(function(){var t=Je(Ge().mark((function t(e){var r;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.document.body).load("text"),t.next=4,e.sync();case 4:return t.abrupt("return",r.text);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),console.error("Error getting document content:",t.t0),t.abrupt("return","");case 10:case"end":return t.stop()}}),t,null,[[0,6]])}))),Ye.apply(this,arguments)}function Qe(t,e){return Ze.apply(this,arguments)}function Ze(){return Ze=Je(Ge().mark((function t(e,r){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Word.run(function(){var t=Je(Ge().mark((function t(n){var o,i,s;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.document.body.search(e,{matchCase:!0,matchWholeWord:!1,matchWildcards:!1}),n.load(o,"text"),t.next=4,n.sync();case 4:console.log("Found ".concat(o.items.length,' instances of "').concat(e,'"')),i=0;case 6:if(!(i<o.items.length)){t.next=15;break}return s=o.items[i],n.load(s,["text","paragraphs"]),t.next=11,n.sync();case 11:s.insertText(r,Word.InsertLocation.replace);case 12:i++,t.next=6;break;case 15:return t.next=17,n.sync();case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.error("Error replacing text:",t.t0),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])}))),Ze.apply(this,arguments)}function tr(t){return er.apply(this,arguments)}function er(){return er=Je(Ge().mark((function t(e){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Word.run(function(){var t=Je(Ge().mark((function t(r){var n;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=r.document.body.insertParagraph(e,Word.InsertLocation.end)).font.color="black",n.font.size=11,n.insertParagraph("",Word.InsertLocation.before),t.next=6,r.sync();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.error("Error inserting response:",t.t0),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])}))),er.apply(this,arguments)}var rr=[],nr=null;function or(){var t={id:Date.now().toString(36)+Math.random().toString(36).substring(2),title:"New Conversation",timestamp:new Date,messages:[{content:"Hello! I'm AskJunior Assistant. How can I help with your document today?",sender:"assistant",timestamp:new Date}]};return rr.push(t),nr=t,sr(),t}function ir(t){nr&&(nr.messages.push(t),2===nr.messages.length&&"user"===t.sender&&(nr.title=t.content.substring(0,30)+(t.content.length>30?"...":"")),sr())}function sr(){try{localStorage.setItem("conversations",JSON.stringify(rr))}catch(t){console.error("Error saving conversations:",t)}}function ar(t){var e=document.getElementById("chat-messages");if(e){var r=document.createElement("div");r.className="message ".concat(t.sender);var n=document.createElement("div");n.className="message-content",n.textContent=t.content;var o=document.createElement("div");o.className="message-time",o.textContent=t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.scrollTop=e.scrollHeight}}function cr(){var t=document.getElementById("chat-messages");t&&(t.innerHTML="",nr&&nr.messages.forEach((function(t){ar(t)})))}function ur(){var t=document.getElementById("past-conversations");t&&(t.innerHTML="",rr.forEach((function(e){var r=document.createElement("li");r.className="past-conversation-item",r.dataset.id=e.id;var n=document.createElement("div");n.className="conversation-content";var o=document.createElement("div");o.className="conversation-title",o.textContent=e.title||"New Conversation";var i=document.createElement("div");i.className="conversation-time",i.textContent=e.timestamp.toLocaleDateString([],{month:"short",day:"numeric"}),n.appendChild(o),n.appendChild(i),r.appendChild(n),r.addEventListener("click",(function(){!function(t){var e=rr.find((function(e){return e.id===t}));return e?(nr=e,console.log("Successfully loaded conversation: ".concat(t)),!0):(console.error("Conversation not found with ID: ".concat(t)),!1)}(e.id)?console.error("Failed to load conversation: ".concat(e.id)):(cr(),document.querySelectorAll(".past-conversation-item").forEach((function(t){t.classList.remove("selected")})),r.classList.add("selected"),console.log("Loaded conversation: ".concat(e.id)))})),t.appendChild(r)})))}function lr(t){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function hr(){hr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,s=Object.create(i.prototype),a=new j(n||[]);return o(s,"_invoke",{value:L(t,r,a)}),s}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function g(){}function v(){}function w(){}var b={};u(b,s,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(O([])));_&&_!==r&&n.call(_,s)&&(b=_);var k=w.prototype=g.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,s,a){var c=h(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==lr(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(l).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=f;return function(i,s){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===i)throw s;return{value:t,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var c=P(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(lr(e)+" is not iterable")}return v.prototype=w,o(k,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:v,configurable:!0}),v.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),u(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},E(k),u(k,c,"Generator"),u(k,s,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function fr(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return dr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function dr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function pr(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function mr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){pr(i,n,o,s,a,"next",t)}function a(t){pr(i,n,o,s,a,"throw",t)}s(void 0)}))}}function yr(t){return gr.apply(this,arguments)}function gr(){return(gr=mr(hr().mark((function t(e){var r,n,o;return hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=fr(e),t.prev=1,r.s();case 3:if((n=r.n()).done){t.next=21;break}if(o=n.value,t.prev=5,"text_editor"!==o.name){t.next=11;break}return t.next=9,vr(o);case 9:t.next=14;break;case 11:if("document_writer"!==o.name){t.next=14;break}return t.next=14,br(o);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),console.error("Error processing operation ".concat(o.name,":"),t.t0);case 19:t.next=3;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(1),r.e(t.t1);case 26:return t.prev=26,r.f(),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[1,23,26,29],[5,16]])})))).apply(this,arguments)}function vr(t){return wr.apply(this,arguments)}function wr(){return(wr=mr(hr().mark((function t(e){var r,n,o,i;return hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("view"!==(r=e.input.command)){t.next=5;break}console.log("View operation processed"),t.next=14;break;case 5:if("str_replace"!==r){t.next=14;break}if(n=e.input.old_str,o=e.input.new_str,!n||!o){t.next=14;break}return t.next=11,Qe(n,o);case 11:ir(i={content:"I've replaced \"".concat(n,'" with "').concat(o,'" in your document.'),sender:"assistant",timestamp:new Date}),ar(i);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function br(t){return xr.apply(this,arguments)}function xr(){return(xr=mr(hr().mark((function t(e){var r,n,o,i;return hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.input.content,n=e.input.position||"end",o=e.input.formatting||{},!r){t.next=10;break}return"replace_all"===n&&console.log("Performing replace_all operation with formatting preservation"),t.next=7,Ke(r,n,o);case 7:ir(i={content:"I've added the requested content to your document while preserving formatting.",sender:"assistant",timestamp:new Date}),ar(i);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _r(t){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(t)}function kr(){kr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,s=Object.create(i.prototype),a=new j(n||[]);return o(s,"_invoke",{value:L(t,r,a)}),s}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function g(){}function v(){}function w(){}var b={};u(b,s,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(O([])));_&&_!==r&&n.call(_,s)&&(b=_);var k=w.prototype=g.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,s,a){var c=h(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==_r(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(l).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=f;return function(i,s){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===i)throw s;return{value:t,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var c=P(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_r(e)+" is not iterable")}return v.prototype=w,o(k,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:v,configurable:!0}),v.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),u(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},E(k),u(k,c,"Generator"),u(k,s,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function Er(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}var Sr="anthropic_api_key";function Lr(){var t=document.getElementById("chat-input"),e=t.value.trim();if(e){var r={content:e,sender:"user",timestamp:new Date};ir(r),ar(r),t.value="",function(t){Pr.apply(this,arguments)}(e),ur()}}function Pr(){return(t=kr().mark((function t(e){var r,n,o,i,s,a,c,u,l,h;return kr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=localStorage.getItem(Sr)||""){t.next=11;break}return ir(n={content:"Please provide your Anthropic API key to continue.",sender:"assistant",timestamp:new Date}),ar(n),o=document.getElementById("app-body"),i=document.getElementById("api-key-container"),o&&(o.style.display="none"),i&&(i.style.display="block"),t.abrupt("return");case 11:return t.next=13,ze();case 13:return s=t.sent,t.next=16,Fe(e,s,r);case 16:if(a=t.sent,c=a.aiResponse,u=a.toolOperations,c&&(ir(l={content:c,sender:"assistant",timestamp:new Date}),ar(l)),!(u.length>0)){t.next=25;break}return t.next=23,yr(u);case 23:t.next=28;break;case 25:if(!c){t.next=28;break}return t.next=28,tr(c);case 28:t.next=36;break;case 30:t.prev=30,t.t0=t.catch(0),console.error("Error processing message:",t.t0),ir(h={content:"Sorry, I encountered an error. Please try again.",sender:"assistant",timestamp:new Date}),ar(h);case 36:case"end":return t.stop()}}),t,null,[[0,30]])})),Pr=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){Er(i,n,o,s,a,"next",t)}function a(t){Er(i,n,o,s,a,"throw",t)}s(void 0)}))}).apply(this,arguments);var t}Office.onReady((function(t){t.host===Office.HostType.Word&&(document.getElementById("sideload-msg").style.display="none",function(){(function(){try{var t=localStorage.getItem("conversations");return t&&(rr=JSON.parse(t)).forEach((function(t){t.timestamp=new Date(t.timestamp),t.messages.forEach((function(t){t.timestamp=new Date(t.timestamp)}))})),rr.length>0?nr=rr[rr.length-1]:or(),rr}catch(t){return console.error("Error loading conversations:",t),rr=[],or(),rr}})(),cr(),ur(),function(){var t=localStorage.getItem(Sr),e=document.getElementById("app-body"),r=document.getElementById("api-key-container");t?(e&&(e.style.display="block"),r&&(r.style.display="none")):(e&&(e.style.display="none"),r&&(r.style.display="block"));var n=document.getElementById("api-key-form");n&&n.addEventListener("submit",(function(t){t.preventDefault(),function(){var t=document.getElementById("api-key-input");if(t&&t.value.trim()){localStorage.setItem(Sr,t.value.trim());var e=document.getElementById("app-body"),r=document.getElementById("api-key-container");e&&(e.style.display="block"),r&&(r.style.display="none")}}()}))}();var t=document.getElementById("send-message"),e=document.getElementById("chat-input"),r=document.getElementById("new-chat");t&&e&&(t.addEventListener("click",(function(){Lr()})),e.addEventListener("keydown",(function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),Lr())}))),r&&r.addEventListener("click",(function(){or(),cr(),ur()}))}())}))}(),new URL(r(58394),r.b)}();
//# sourceMappingURL=taskpane.js.map